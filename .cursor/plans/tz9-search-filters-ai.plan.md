# ТЗ-9: Фильтры поиска + AI-подбор (логика и UX)

## Статус: выполнен

## Сделано

### 1. Порядок главной
- Hero → AI-поиск (блок поиска вверху) → Популярные города → Актуальные объявления → AI-подбор → Новости → Статистика.
- Удалён дублирующий блок «Расширенный поиск» (огромный белый блок).

### 2. Кнопка «Фильтры»
- Открывает modal (bottom sheet на мобиле, центр на ПК), не переход на страницу.

### 3. Поведение фильтра
- Мобилка: BottomSheet снизу, maxHeight 90vh.
- ПК: модальное окно по центру, maxHeight 90vh, height 90vh.
- Контент фильтра: overflow-y: auto, скроллится.

### 4. Тёмная тема
- Фильтр: bg-[var(--card-bg)], border-[var(--border)], text-[var(--text-main)]. Классы home-filter-modal-tz9.

### 5. AI-подбор
- Кнопка «Подобрать жильё с AI» открывает AI wizard (не фильтр).

### 6. AI wizard (UI)
- Шаги: 1) Город, 2) Когда, 3) Бюджет, 4) С кем, 5) Цель.
- После «Подобрать» — экран «Анализируем…», затем выдача 5 карточек с текстом «Почему подходит» и кнопка «Перейти к результатам» (/listings?ai=true).

### 7. Бюджет
- В BudgetRange добавлен плавный слайдер 0 — 50 000 ₽ (два range input, step 1000). Поля «От/До» сохранены.

### 8. Популярные города
- Уменьшены отступы: home-tz9-cities, margin-top 24px, padding 32px/40px. Grid 2x2 (мобилка) / 4 (ПК) без изменений.

### 9. Кнопка поиска
- Текст: «Показать N вариантов», когда уже есть результаты и город выбран; иначе «Показать варианты» / «Подобрать жильё».

### 10. Переход на страницу поиска
- «Применить» в модалке фильтра → переход на /listings?params (город, бюджет, тип и т.д.).

### 11. Состояние фильтра в Hero
- При выбранном городе в hero показывается: «Подбор для вас в {город}».

### 12. Sticky мини-фильтр
- Уже был: при скролле вверху компактная строка (город, бюджет, «Фильтры», «Показать»).

## Файлы
- `frontend/app/HomePageV6.tsx` — порядок блоков, удаление дубля, Hero city, handleFilterApplyAndGo, AI wizard, кнопка «Показать N вариантов».
- `frontend/components/home/Hero.tsx`, `HeroSection.tsx` — проп selectedCity, текст «Подбор для вас в {город}».
- `frontend/components/filters/AIWizardModal.tsx` — новый компонент (5 шагов + выдача).
- `frontend/components/filters/BudgetRange.tsx` — слайдер 0–50k.
- `frontend/components/filters/index.ts` — экспорт AIWizardModal.
- `frontend/styles/home-tz18.css` — TZ-9: home-tz9-cities, home-filter-modal-tz9.

## Коммит
fix: search filters UX + AI wizard

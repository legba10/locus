---
name: ""
overview: ""
todos: []
isProject: false
---

# ТЗ-23 / ТЗ-24: Роли и финальный релиз

## ТЗ-23 — Проверка логики ролей и доступа

### Сделано

- **auth-store**: `hasRole`/`hasAnyRole` учитывают `isAdmin` (доступ в админку по флагу, даже если role !== 'admin').
- **Header**: `isLandlord` = role landlord ИЛИ `listingUsed > 0`; пункты «Мои объявления», «Бронирования», «Доход» показываются только арендодателю.
- **Admin layout**: комментарий исправлен (защита по роли admin).
- Гость: сообщения/кабинет/админ не показываются (шапка — только «Войти», сообщения при `authed`).
- Админ-UI в шапке только при `isAdmin`; `/admin` защищён через `ProtectedRoute roles={["admin"]}`.

### Итог ТЗ-23

- Роли: гость / user / landlord / admin — логика проверена и стабилизирована.
- Дублей кнопок в шапке нет (поиск, сообщения, профиль; бургер — сервис; нижнее меню по ТЗ-21).

---

## ТЗ-24 — Финальный пуш и деплой

### Задачи

1. Очистка: удалить console.log/debug во frontend (кроме скриптов и logger).
2. Локальная сборка: `npm run build` — без ошибок.
3. Env: проверить NEXT_PUBLIC_SUPABASE_*, при необходимости OPENAI_KEY.
4. Git: коммит, пуш, тег v1.0-stable (по согласованию).

### Статус

- **Очистка**: лишних `console.log` в коде приложения нет (только скрипты и logger).
- **Env**: в `frontend/.env.example` есть `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`.
- **Сборка**: `npm run build` запущена — дождаться завершения.
- **Git**: после успешной сборки: коммит, пуш, при необходимости тег `v1.0-stable`.


# ТЗ 30 — Финальная архитектура кабинета пользователя

## Цель
Кабинет = единый центр управления только через Нижнее меню → Профиль. Без дублей, скрытых меню, альтернативных маршрутов.

## Статус: ✅ Выполнено

### Сделано

1. **Структура /profile (4 блока)**
   - Блок 1 — Аккаунт: аватар, имя, статус, рейтинг, кнопка «Редактировать профиль»
   - Блок 2 — Управление жильём по роли (арендодатель: объявления, бронирования, продвижение, финансы; пользователь: бронирования, избранное, сообщения; кнопка «Стать арендодателем» при отсутствии объявлений)
   - Блок 3 — Настройки: одна ссылка в /profile/settings, Выход
   - Отступы между блоками 24px, карточки 16px, тень

2. **Маршруты**
   - `/profile/listings` — страница списка объявлений (API /api/listings/my), статус, просмотры, кнопки редактировать/продвинуть/скрыть, пустое состояние + «Добавить объявление»
   - `/profile/listings/create` — мастер создания объявления, после успеха → /profile/listings
   - `/profile/bookings` — бронирования (те же данные, что /bookings), «Назад в профиль»
   - `/profile/finance` — баланс, тариф, история, лимиты (placeholder для арендодателя); для не-арендодателя — текст + «Стать арендодателем»
   - `/profile/promo` — активный тариф, преимущества PRO, кнопка «Подключить продвижение»
   - `/profile/settings` — три раздела: Основное (→ edit), Безопасность (→ security), Интерфейс (тема + уведомления)

3. **Навигация**
   - Rewrites для /profile/listings убраны — отдаётся реальная страница
   - Редирект /bookings → /profile/bookings
   - Сайдбар профиля: Бронирования → /profile/bookings; для арендодателя добавлены Продвижение (/profile/promo) и Финансы (/profile/finance)
   - На подстраницах профиля сайдбар с «← Назад в профиль»

4. **Убрано**
   - Дубли кнопок «Сообщения» и «Добавить объявление» на главной профиля
   - Редирект finance в owner/dashboard — контент на месте
   - Двойные блоки настроек (единая страница настроек с тремя секциями)

### Файлы

- `frontend/app/profile/page.tsx` — главная профиля (блоки 1–3)
- `frontend/app/profile/listings/page.tsx` — мои объявления
- `frontend/app/profile/listings/create/page.tsx` — создание объявления
- `frontend/app/profile/bookings/page.tsx` — бронирования
- `frontend/app/profile/finance/page.tsx` — финансы (контент на месте)
- `frontend/app/profile/promo/page.tsx` — продвижение
- `frontend/app/profile/settings/page.tsx` — настройки (Основное, Безопасность, Интерфейс)
- `frontend/components/profile/ProfileSidebar.tsx` — ссылки на /profile/bookings, /profile/promo, /profile/finance
- `frontend/next.config.js` — убраны rewrites profile/listings; добавлен redirect /bookings → /profile/bookings

### Проверки (ТЗ 30)

- [x] Открыть профиль → структура читаемая
- [x] Перейти в объявления → назад → профиль
- [x] Нет дублирования функций
- [x] Нет 404 (finance, promo — свои страницы)
- [x] Разные роли отображаются корректно (арендодатель / пользователь / «Стать арендодателем»)

# ТЗ №5 — Логика режимов размещения объявления

## Цель
Два разных потока: «Быстро через фото (AI)» и «Создать с нуля». Только архитектура и сценарии, без настоящего AI.

## Статус: ✅ выполнено

### Сделано

1. **Экран выбора режима**
   - `components/listing/ModeSelect.tsx`: заголовок «Как разместить объявление?», две карточки (Быстро через фото / Создать вручную).

2. **State**
   - `type Mode = "fast" | "manual"`, `const [mode, setMode] = useState<Mode | null>(null)` в `ListingWizard`.

3. **Поток Fast**
   - Выбор «Быстро через фото» → шаг 1 (загрузка фото) → «Далее» (≥5 фото + комната/санузел) → экран `AiLoader` («AI анализирует фото...», смена фраз) → вызов `mockAnalyzePhotos()` → автозаполнение полей (title, type, rooms, description) → форма (шаги 2–7).

4. **Mock AI**
   - `components/listing/mockAi.ts`: `mockAnalyzePhotos()` — задержка 1.5 с, возврат `{ title, rooms, type, kitchen, bathroom, description }`.

5. **Поток Manual**
   - Выбор «Создать вручную» → сразу форма (шаги 2–6: город, тип, цена, основное, удобства, описание, цена) → шаг 1 (фото) → шаг 7 (превью) → отправка. Фото необязательно (можно без фото).

6. **Переключение режима**
   - В шапке формы ссылка «← изменить способ размещения» при `!isEdit && mode !== null && step !== 0`. По клику: сброс `mode` в `null`, `step` в 0, `data` в `defaultData()`.

7. **Компоненты**
   - `ModeSelect.tsx`, `AiLoader.tsx`, `mockAi.ts`, `FastFlow.tsx`, `ManualFlow.tsx` (обёртки для структуры потока).

8. **Валидация**
   - Fast: на шаге фото нельзя «Далее» без ≥5 фото и тегов комната/санузел.
   - Manual: на шаге фото валидация не требуется (можно 0 фото).

9. **Кнопка «Далее» на шаге 0**
   - Отключена, пока не выбран режим (`step === 0 && mode === null`).

### Критерии готовности (ТЗ №5)
- ✔ Режимы реально разные
- ✔ Fast: сначала фото
- ✔ Manual: сначала форма
- ✔ Есть mock AI
- ✔ Форма автозаполняется после AI
- ✔ Можно вернуться назад («изменить способ размещения»)

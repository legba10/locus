# ТЗ 3 — Геймификация и UX отзывов

## Цель
Мотивировать пользователей оставлять отзывы после выезда.

## Реализовано

### 1. Поп-ап после выезда
- **`reviewReminderStorage.ts`**: очередь напоминаний, флаги «позже»/«отклонить», отключение в настройках, счётчик отправленных отзывов.
- **`ReviewReminderPopup.tsx`**: попап «Как прошло проживание?» с кнопками «Оставить отзыв» и «Позже», показ через 2 ч после checkOut.
- Подключение в **`layout.tsx`** (dynamic, ssr: false).
- Сохранение напоминания при создании брони в **`ListingPageV2.tsx`** (`handleBookingConfirm` → `addPendingReminder`).

### 2. Анимация после отправки
- **`ReviewWizard.tsx`**: после успешной отправки — маленький Lottie-робот, текст «Спасибо! Отзыв помогает другим», «+5 к рейтингу пользователя», «Вы помогли N людям выбрать жильё» (N из localStorage).
- Вызов `incrementReviewSubmittedCount()` при успешной отправке.

### 3. Награда
- Строка «+5 к рейтингу пользователя» на экране успеха (только визуально).

### 4. Мини-прогресс
- «Вы помогли N людям выбрать жильё» на экране успеха (N = количество отправленных отзывов в этом браузере).

### 5. Acceptance
- ✅ Поп-ап после завершения брони (через 2 ч после checkOut).
- ✅ Анимация (робот + текст) после отправки.
- ✅ Нет спама: одно напоминание на бронь, «Позже» откладывает на 24 ч, можно отключить.
- ✅ Отключение: ссылка «Не показывать напоминания» в попапе (настройки профиля можно добавить позже).

## Файлы
- `frontend/shared/reviews/reviewReminderStorage.ts`
- `frontend/components/reviews/ReviewReminderPopup.tsx`
- `frontend/app/layout.tsx`
- `frontend/domains/listing/ListingPageV2.tsx`
- `frontend/components/listing/ReviewWizard.tsx`

# ТЗ-12: Переработка поиска и фильтров (UX уровня Airbnb/Циан)

## Цель
Сделать поиск главным инструментом. Один сценарий за 1 действие. Без дублирования и неожиданных переходов.

## Выполнено

### 1. Главная строка поиска
- **Состав:** [Город] [Бюджет] [Тип жилья] [Показать варианты] [Фильтры].
- Бюджет — select с пресетами (Любой, до 30k, 30–50k и т.д.).
- Тип — select (Любой, Квартира, Дом, Комната, Студия).
- Desktop: одна строка, до 1100px. Mobile: карточка, margin 16px, radius 18px (через общий rounded-2xl).

### 2. Кнопка «Подобрать жильё»
- **Если город выбран** → выполняется поиск (переход в каталог).
- **Если город не выбран** → подсветка поля города (подсказка + shake), фильтры не открываются, AI не открывается.
- Реализация: одна кнопка с `onClick={handlePrimarySearch}`; подпись «Показать варианты» / «Подобрать жильё» в зависимости от города.

### 3. Кнопка «Фильтры»
- **Desktop:** открывает dropdown-панель под поиском (fixed, по центру, max-w 1100px), с затемнением фона (overlay), анимация 220ms.
- **Mobile:** открывает Bottom sheet с тем же содержимым. На desktop sheet скрыт (md:hidden).

### 4. Содержимое панели фильтров
- Город, Бюджет, Тип, Срок, Комнаты, AI подбор (через FilterPanel).
- В шапке панели: **Сбросить** (reset store) и кнопка закрытия.
- Внизу: «Умный подбор» и «Показать варианты» (из FilterPanel).

### 5. Визуал
- Обёртка поиска: max-width 1100px, padding 16px (mobile) / 24px (desktop).
- Блок поиска: тень 0 4px 20px rgba(0,0,0,0.06), radius 20px на desktop, 18px на mobile.
- Overlay и dropdown с анимацией появления.

### 6. Состояния
- **default** — поля пустые или заполнены.
- **active** — город выбран (кнопка показывает «Показать варианты»).
- **searching** — после клика по поиску показывается loader на кнопке («Загрузка…» + спиннер), кнопка disabled.

### 7. Убрано
- Дубли: основная кнопка больше не открывает фильтры и не открывает AI при пустом городе.
- Inline-блок расширенных фильтров под поиском убран; фильтры только по кнопке «Фильтры» (dropdown / sheet).

## Не трогали
- Логотип, остальные блоки главной.
- Страница каталога / поиска (SearchPageV4) — без изменений в рамках этого ТЗ.

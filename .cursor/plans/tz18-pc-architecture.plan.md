# ТЗ-18: Полная стабилизация и логическая архитектура ПК-версии

## Цель
Вернуть архитектуру ПК и привести к единой системе с мобильной (без переписывания ядра).

## Принцип
ПК = расширение мобильной логики. HEADER → LEFT NAV (только когда есть контент) → CONTENT.

---

## Выполнено

### 1. Header (ПК)
- **Всегда:** логотип LOCUS, поиск (иконка на малых экранах, поле на xl), колокольчик (гость — иконка, авторизован — NotificationsBell).
- **Авторизован:** аватар (открывает меню: Профиль, Админ панель при hasRole('admin'), Выйти).
- **Не авторизован:** кнопка «Войти».
- **Добавлено:** кнопка «Сдать жильё» в header (ведёт на /create-listing или логин с redirect).
- **Убрано из header:** сообщения и профиль отдельной кнопкой (профиль только через аватар). Бургер на ПК скрыт (lg:hidden) — на ПК у гостя левое меню.

**Файл:** `frontend/components/layout/Header.tsx`

### 2. Левое меню (ПК)
- **Показ:** только на desktop (lg+), скрыто на маршрутах /admin (админка — отдельный слой).
- **Гость:** Главная, Поиск, Как это работает, О сервисе, Поддержка.
- **Авторизованный:**
  - **Основное:** Главная, Поиск, Сообщения, Избранное.
  - **Арендодатель:** Мои объявления, кнопка «Добавить объявление», Бронирования, Продвижение, Финансы.
  - **Система:** Профиль, Настройки, Выйти.
  - **Админ (если роль admin):** Админ панель.
- Дубли и лишние разделы убраны.

**Файл:** `frontend/components/layout/AppSidebarTZ14.tsx`

### 3. CTA «Разместить объявление»
- В header: кнопка «Сдать жильё» (всегда видна на sm+).
- В левом меню (арендодатель): пункт «Добавить объявление» под «Мои объявления».

### 4. Сообщения
- Доступ: левое меню → Сообщения (/messages).
- Экран сообщений: уже layout «список чатов | переписка» (MessagesInner, md:grid).

### 5. Профиль и админка
- Профиль: /profile, пункт в левом меню и в меню аватара.
- Админка: /admin, отдельный слой; доступ из меню аватара и из левого меню (блок «Админ» при hasRole('admin')).

### 6. Главная ПК
- Структура: HEADER (layout) + HERO + ПОИСК + КАРТОЧКИ (HomePageV6).
- Доп. очистка «странных блоков» при необходимости — точечно по скринам.

### 7. Страница объявления (ПК)
- По ТЗ-17: левая колонка — фото, описание, AI, отзывы; правая (sticky) — цена, даты, забронировать, написать. Без изменений в ТЗ-18.

---

## Запрещено (соблюдено)
- Не переписывались API, БД, auth.
- AI-блок и страницы не удалялись.

---

## Файлы изменений
| Файл | Изменения |
|------|-----------|
| `components/layout/Header.tsx` | Колокольчик всегда, кнопка «Сдать жильё», бургер lg:hidden. |
| `components/layout/AppSidebarTZ14.tsx` | Полная переработка: гость/авторизованный, блоки Основное/Арендодатель/Система/Админ, «Добавить объявление». |

## Синхронизация с мобильной
| Мобилка | ПК |
|---------|-----|
| Нижнее меню | Левое меню |
| Шапка | Header |
| Профиль | Профиль (меню + левое меню) |
| Админ | Админ (меню аватара + левое меню) |

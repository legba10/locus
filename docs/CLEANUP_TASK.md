ТЗ ДЛЯ CURSOR: БЕЗОПАСНАЯ ОЧИСТКА ПРОЕКТА LOCUS

Цель

Уменьшить размер проекта, удалить мусор и ускорить работу,
не сломав ни одной функции, кнопки или API.

Удаление только по строгим правилам.

⸻

ГЛАВНОЕ ПРАВИЛО

НЕЛЬЗЯ удалять:
 • бизнес-логику
 • API
 • компоненты, которые хоть где-то импортируются
 • Supabase/Neon схемы
 • auth
 • listing
 • billing
 • telegram

Cursor обязан сначала сделать аудит.

⸻

ЭТАП 1. АУДИТ ФАЙЛОВ (ТОЛЬКО АНАЛИЗ)

Cursor должен:

1. Посчитать файлы по категориям

Сформировать отчёт:

Всего файлов:
node_modules:
.next:
dist:
реальный код:

2. Найти мусорные директории

Проверить наличие:

.next
dist
build
coverage
.cache
.vercel
turbo

Сделать список.

3. Найти дубликаты

Проверить:
 • одинаковые API routes
 • дубли auth
 • старые listing routes
 • backup файлы

Вывести отчёт.

⸻

ЭТАП 2. DRY RUN (БЕЗ УДАЛЕНИЯ)

Cursor обязан:

1️⃣ Создать ветку

cleanup-safe

2️⃣ Сформировать список файлов на удаление
НО НЕ УДАЛЯТЬ

Отчёт:

будет удалено:
причина:
влияет на код: да/нет


⸻

ЭТАП 3. БЕЗОПАСНОЕ УДАЛЕНИЕ

Разрешено удалить автоматически только:

BUILD МУСОР

.next
dist
build
coverage
.cache
.vercel
turbo

node_modules

Удалить и установить заново.

⸻

ЭТАП 4. ПОИСК МЁРТВОГО КОДА

Cursor должен:

1️⃣ Найти файлы без импортов
2️⃣ Проверить через AST
3️⃣ Если не используется нигде → пометить

Но не удалять без отчёта.

⸻

ЭТАП 5. ОЧИСТКА ЗАВИСИМОСТЕЙ

Запустить анализ:

depcheck

Сформировать отчёт:

неиспользуемые пакеты
дубликаты

Удалять только после подтверждения.

⸻

ЭТАП 6. СТРУКТУРНАЯ ОПТИМИЗАЦИЯ

Cursor должен:
 • убрать дубликаты API
 • убрать старые версии компонентов
 • объединить auth
 • удалить legacy landlord код

НО:
если используется хоть в одном месте → не трогать.

⸻

ЭТАП 7. ОПТИМИЗАЦИЯ ДЛЯ CURSOR

Создать файл .cursorignore:

node_modules
.next
dist
build
coverage
.vercel
.cache


⸻

ЭТАП 8. ПРОВЕРКА ПОСЛЕ ЧИСТКИ

Cursor обязан:

1️⃣ Запустить проект
2️⃣ Проверить:
 • логин
 • telegram auth
 • создание объявления
 • профиль
 • тарифы
 • админ

Если что-то ломается → откат.

⸻

ЭТАП 9. ОТЧЁТ

После выполнения Cursor должен выдать:

Удалено файлов:
Размер до:
Размер после:
Что оптимизировано:


⸻

ЗАПРЕЩЕНО

Cursor не имеет права:

❌ удалять файлы без проверки импортов
❌ удалять backend
❌ удалять migrations
❌ удалять prisma
❌ удалять supabase
❌ удалять auth

⸻

КОМАНДА ДЛЯ CURSOR

Вставь в Cursor:

Выполни безопасную очистку проекта по ТЗ.

1. Сделай аудит файлов
2. Сформируй dry-run отчёт
3. Удали только build мусор
4. Найди мёртвый код
5. Оптимизируй структуру
6. Ничего не ломай
7. Дай отчёт


⸻

ВАЖНО

Cursor НЕ помнит весь диалог.
Поэтому ТЗ должно быть внутри проекта.

Создай файл:

/docs/CLEANUP_TASK.md

И вставь туда это ТЗ.

⸻

ЧТО БУДЕТ ПОСЛЕ

После чистки:
 • проект ускорится
 • Cursor станет работать быстрее
 • меньше лагов
 • меньше конфликтов

⸻
